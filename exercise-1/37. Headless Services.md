Now, what if you don't want a load balancer in the middle

there? Maybe you're thinking that you just want a straight

shot from one container to another.

现在，如果你不想中间有一个负载均衡器呢？也许你只是想从一个容器直接射到另一个容器。
* what if 如果…怎么办

That's fine. It's just not the default.

没关系。这不是默认的。

When we use that expose command, we could opt out

of the clusterIP, and we'll have

other options.

当我们使用 expose 命令时，
我们可以选择退出 clusterIP，并且我们将有其他选项。

Generally, this isn't a big deal.

一般来说，这没什么大不了的。

The one reason that I might say in normal use

cases where you would maybe want to avoid this, is

if you had backend databases, and you were a little bit

paranoid about the connection to those databases,

and you wanted to get the kube-proxy

out of the middle. For that, we're going to use a headless

service. By saying headless, what we mean here

is that the clusterIP won't have the kube-proxy

acting as the proxy. It won't hop through that.

我可能会说，在正常使用情况下，
您可能想避免这种情况的一个原因是，
如果您有后端数据库，
并且对与这些数据库的连接有些偏执，
并且想获得kube-proxy 在中间。
为此，我们将使用无头服务。
通过说 headless，
我们在这里的意思是 clusterIP
不会让 kube-proxy 充当代理。
它跳不过去。

We do that by adding the --clusterIP

to the expose command.

为此，我们将 --clusterIP 添加到 expose 命令中。

Remember, earlier I mentioned that you could set

this and hard code the clusterIP if you really wanted to.

That's pretty rare. Most cases, you don't have to do that

because you're going to get an IP assigned anyway.

We could just set it to none.

When we do that, Kubernetes is smart enough to know that

what we really are meaning here is that we would like it

to just return us a list of the same, A records

for the same name and different IP addresses.

This is common in large companies around the world

where if you look up their A record for a particular DNS

address like Google.com, you would get back multiple

A addresses for that.

So, in this case, you could do that.

If you only have one pod behind your deployment,

then sure, it's only going to return one A address.

In the case where we have these 10, it would return

us a whole list, and it would be up to the client, whatever

we're using, to determine which one it should

be using. The reason we don't have this as the default

is that web applications in particular don't seem

to be really good at making sure they're hopping

around and finding all the A records and using them

indiscriminately.

The clusterIP way of doing things, where

it puts that proxy in the middle, is a way

to enforce a distribution of the connections.

There's all sorts of old legacy tech that

has problems with this multiple A record approach.

So, you don't usually want to use it by default.

If you're interested more in the whole DNS

multi-address versus clusterIP

situation, you know there's some links in the resources.

It essentially has to do with how client libraries deal

with DNS, DNS caching and that sort of stuff.

You can check it out.

